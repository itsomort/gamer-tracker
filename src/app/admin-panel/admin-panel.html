<div id="header">
  <h1>Admin Panel</h1>
  <div>
    <button (click)="onHomeNavigate()" type="button">Home</button>
    <button (click)="onLogout()" type="button">Logout</button>
  </div>
</div>

<form id="main_panel">
  <div id="users">
    <h2>Users</h2>
    <div *ngFor="let user of users" id="user">
      <input 
        name="user_form" 
        type="radio" 
        [value]="user.username"
        (change)="onUserSelect(user)"
        [id]="'user_' + user.username">
      <label [for]="'user_' + user.username">{{ user.username }} ({{ user.type === 1 ? 'Admin' : 'User' }})</label>
    </div>
    <div *ngIf="users.length === 0" id="user">
      <span>No users found</span>
    </div>
  </div>

  <div id="journals">
    <h2>Journals</h2>
    <div *ngIf="!selectedUser" class="journal-placeholder">
      <span>Select a user to view their journals</span>
    </div>
    <div *ngFor="let journal of journals; trackBy: trackByJournalId" class="journal-item-container">
      <input 
        name="journal_form" 
        type="radio" 
        [value]="journal.id"
        (change)="onJournalSelect(journal)"
        [id]="'journal_' + journal.id">
      <label [for]="'journal_' + journal.id">
        <div class="journal-item">
          <div class="journal-subject">{{ journal.subject }}</div>
        </div>
      </label>
    </div>
    <div *ngIf="selectedUser && journals.length === 0" class="journal-placeholder">
      <span>No journals found for {{ selectedUser.username }}</span>
    </div>
  </div>

  <div id="actions">
    <button 
      type="button"
      (click)="loadUserJournals(selectedUser?.username)" 
      [disabled]="!selectedUser"
      id="admin-button">
      Get Journals
    </button>
    <button 
      type="button"
      (click)="deleteUser()" 
      [disabled]="!selectedUser"
      id="admin-button">
      Delete User
    </button>
    <button 
      type="button"
      (click)="deleteJournal()" 
      [disabled]="!selectedJournal"
      id="admin-button">
      Delete Journal
    </button>
  </div>

  <div *ngIf="selectedJournal" id="journal_preview">
    <h3>Journal Preview</h3>
    <div>
      <div class="preview-subject">{{ selectedJournal.subject }}</div>
      <p><strong>Entry:</strong> {{ selectedJournal.content }}</p>
      <p><strong>Games Played:</strong> {{ selectedJournal.games }}</p>
      <p><strong>Session Time:</strong> {{ selectedJournal.time }} seconds</p>
    </div>
  </div>
</form>

